<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Timeline</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; }
        .scroll-smooth { scroll-behavior: smooth; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function ChevronLeft(props) {
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width={props.size || 24} height={props.size || 24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
            );
        }

        function ChevronRight(props) {
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width={props.size || 24} height={props.size || 24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
            );
        }

        function X(props) {
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width={props.size || 24} height={props.size || 24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            );
        }

        function MusicTimeline() {
            const [timelineData, setTimelineData] = useState([]);
            const [selectedEvent, setSelectedEvent] = useState(null);
            const [filteredData, setFilteredData] = useState([]);
            const [selectedArtist, setSelectedArtist] = useState('All');
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                // Fetch data from data.json
                fetch('./data.json')
                    .then(response => response.json())
                    .then(data => {
                        const sorted = [...data].sort((a, b) => a.year - b.year);
                        setTimelineData(sorted);
                        setFilteredData(sorted);
                        setLoading(false);
                    })
                    .catch(error => {
                        console.error('Error loading data:', error);
                        setLoading(false);
                    });
            }, []);

            const artists = ['All', ...new Set(timelineData.map(d => d.artist))];

            const handleFilter = (artist) => {
                setSelectedArtist(artist);
                if (artist === 'All') {
                    setFilteredData(timelineData);
                } else {
                    setFilteredData(timelineData.filter(d => d.artist === artist));
                }
            };

            const scroll = (direction) => {
                const container = document.getElementById('timeline-container');
                if (container) {
                    const scrollAmount = 400;
                    container.scrollBy({
                        left: direction === 'right' ? scrollAmount : -scrollAmount,
                        behavior: 'smooth',
                    });
                }
            };

            const getColorByDecade = (year) => {
                if (year < 1990) return 'from-purple-500 to-blue-500';
                if (year < 2000) return 'from-pink-500 to-red-500';
                if (year < 2010) return 'from-emerald-500 to-teal-500';
                return 'from-cyan-500 to-blue-500';
            };

            if (loading) {
                return (
                    <div className="w-full bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 min-h-screen flex items-center justify-center">
                        <p className="text-white text-xl">Loading your music timeline...</p>
                    </div>
                );
            }

            return (
                <div className="w-full bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 min-h-screen p-8">
                    <div className="max-w-7xl mx-auto">
                        {/* Header */}
                        <div className="text-center mb-12">
                            <h1 className="text-5xl font-bold text-white mb-4">Music Timeline</h1>
                            <p className="text-slate-400 text-lg">Explore your music listening journey through the years</p>
                        </div>

                        {/* Artist Filter */}
                        <div className="flex justify-center flex-wrap gap-2 mb-12">
                            {artists.slice(0, 8).map((artist) => (
                                <button
                                    key={artist}
                                    onClick={() => handleFilter(artist)}
                                    className={`px-4 py-2 rounded-full font-semibold transition-all ${
                                        selectedArtist === artist
                                            ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white'
                                            : 'bg-slate-700 text-slate-300 hover:bg-slate-600'
                                    }`}
                                >
                                    {artist}
                                </button>
                            ))}
                        </div>

                        {/* Timeline Container */}
                        <div className="relative">
                            {/* Navigation Buttons */}
                            <button
                                onClick={() => scroll('left')}
                                className="absolute left-0 top-1/2 -translate-y-1/2 z-20 bg-purple-600 hover:bg-purple-700 text-white p-3 rounded-full shadow-lg transition"
                            >
                                <ChevronLeft size={24} />
                            </button>
                            <button
                                onClick={() => scroll('right')}
                                className="absolute right-0 top-1/2 -translate-y-1/2 z-20 bg-purple-600 hover:bg-purple-700 text-white p-3 rounded-full shadow-lg transition"
                            >
                                <ChevronRight size={24} />
                            </button>

                            {/* Timeline Track */}
                            <div
                                id="timeline-container"
                                className="overflow-x-auto scroll-smooth pb-4"
                                style={{ scrollBehavior: 'smooth' }}
                            >
                                <div className="flex items-end justify-start min-w-max gap-8 px-16 py-8">
                                    {/* Timeline Line */}
                                    <div className="absolute left-0 right-0 top-1/2 h-1 bg-gradient-to-r from-purple-500 via-pink-500 to-teal-500" />

                                    {/* Events */}
                                    {filteredData.map((event, index) => (
                                        <div key={index} className="relative">
                                            {/* Timeline Point */}
                                            <div className="flex flex-col items-center">
                                                <button
                                                    onClick={() => setSelectedEvent(event)}
                                                    className={`w-12 h-12 rounded-full bg-gradient-to-br ${getColorByDecade(
                                                        event.year
                                                    )} shadow-lg hover:w-16 hover:h-16 transition-all duration-300 cursor-pointer flex items-center justify-center`}
                                                >
                                                    <span className="text-white font-bold text-sm">{event.year}</span>
                                                </button>

                                                {/* Event Card */}
                                                <div className="mt-6 w-48 bg-slate-700 rounded-lg p-4 shadow-xl hover:shadow-2xl transition border border-slate-600 hover:border-purple-500 cursor-pointer" onClick={() => setSelectedEvent(event)}>
                                                    <p className="font-bold text-white mb-1 line-clamp-2">{event.album}</p>
                                                    <p className="text-purple-400 text-sm mb-3">{event.artist}</p>
                                                    <div className="flex flex-wrap gap-2">
                                                        <span className="text-xs bg-slate-600 text-slate-200 px-2 py-1 rounded">Age {event.age}</span>
                                                        <span className="text-xs bg-slate-600 text-slate-200 px-2 py-1 rounded">{event.device}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>

                        {/* Modal - Selected Event Details */}
                        {selectedEvent && (
                            <div
                                className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"
                                onClick={() => setSelectedEvent(null)}
                            >
                                <div
                                    className="bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-8 max-w-lg w-full border border-purple-500 shadow-2xl"
                                    onClick={(e) => e.stopPropagation()}
                                >
                                    <div className="flex justify-between items-start mb-6">
                                        <h2 className="text-3xl font-bold text-white">{selectedEvent.album}</h2>
                                        <button
                                            onClick={() => setSelectedEvent(null)}
                                            className="text-slate-400 hover:text-white transition"
                                        >
                                            <X size={24} />
                                        </button>
                                    </div>

                                    <div className="space-y-4">
                                        <div className="bg-slate-700 rounded-lg p-4">
                                            <p className="text-slate-400 text-sm">Artist</p>
                                            <p className="text-white text-xl font-semibold">{selectedEvent.artist}</p>
                                        </div>

                                        <div className="grid grid-cols-2 gap-4">
                                            <div className="bg-slate-700 rounded-lg p-4">
                                                <p className="text-slate-400 text-sm">Year</p>
                                                <p className="text-white text-lg font-semibold">{selectedEvent.year}</p>
                                            </div>
                                            <div className="bg-slate-700 rounded-lg p-4">
                                                <p className="text-slate-400 text-sm">Your Age</p>
                                                <p className="text-white text-lg font-semibold">{selectedEvent.age}</p>
                                            </div>
                                        </div>

                                        <div className="grid grid-cols-2 gap-4">
                                            <div className="bg-slate-700 rounded-lg p-4">
                                                <p className="text-slate-400 text-sm">Media Type</p>
                                                <p className="text-white text-lg font-semibold">{selectedEvent.mediaType}</p>
                                            </div>
                                            <div className="bg-slate-700 rounded-lg p-4">
                                                <p className="text-slate-400 text-sm">Device</p>
                                                <p className="text-white text-lg font-semibold">{selectedEvent.device}</p>
                                            </div>
                                        </div>
                                    </div>

                                    <button
                                        onClick={() => setSelectedEvent(null)}
                                        className="w-full mt-6 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold py-3 rounded-lg transition"
                                    >
                                        Close
                                    </button>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MusicTimeline />);
    </script>
</body>
</html>
